<?xml version="1.0" encoding="utf-8"?>
    <odoo>
        <record model="ir.ui.view" id="ps_rezoroute.fleet">
            <field name="name">ps_rezoroute Vehicule</field>
            <field name="model">fleet.vehicle</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_title')]" position="after">                    
                    <group col="2">
                    <group>
                        <!-- <field name="siv"/> -->
                        <field name="manufacturer_id" required="1"/>
                        <!-- <field name="model_id" domaine="[('manufacturer_id','=',manufacturer_id)]"/> -->
                        <field name="type_id"  domaine="[('model_id','=',model_id),('manufacturer_id','=',manufacturer_id)]" required="1"/>
                        <field name="code_moteur"/>
                        <field name="d_2_1"/>
                        <field name="e"/>   
                        <field name="next_distri_date"/>   
                        <field name="next_ct_date"/>   
                        <field name="detail"/>   
                        <field name="nb_porte"/>   
                        <field name="engine_maintenance_variant"/>   
                    </group>  
                    <group string="Client">               
                        <field name="partner_id" width="500" required="1"/>
                        <field name="last_buy"/>
                        <field name="last_servicing_date"/>
                        
                    </group>      
                    </group>      
                </xpath>
                <xpath expr="//field[@name='license_plate']" position="attributes">
                    <attribute name="required">1</attribute>
                    <attribute name="odometer">1</attribute>
                </xpath>  

                <xpath expr="//div[@name='button_box']" postion="inside">
                    <header>
                        <button name="creer_devis" string="Créer un devis" 
                            type="object" class="oe_highlight"/>

                        <button name="creer_ordre_reparation" string="Créer un ordre de réparation" 
                            type="object" class="oe_highlight"/>
                    </header>
                </xpath>
                

                <xpath expr="//div[hasclass('oe_button_box')]" position="inside">
                    <button class="oe_stat_button" type="object" name="schedule_meeting" icon="fa-calendar" context="{'engin_id': active_id}">
                        <field name="calendar_count" widget="statinfo" string="Rendez-vous"/>
                    </button>
                </xpath>
                <xpath expr="//div[hasclass('oe_button_box')]" position="inside">
                    <button class="oe_stat_button" type="object" name="sale_history" icon="fa-calendar" context="{'engin_id': active_id}">
                        <field name="sale_count" widget="statinfo" string="Devis"/>
                    </button>
                </xpath>
                
                
            </field>
        </record>
        <menuitem id="sale_order_menu_or"
            name="Ordre de réparation"
            parent="sale.sale_menu_root"
            sequence="2"/>

    </odoo>

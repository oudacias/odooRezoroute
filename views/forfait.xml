<?xml version="1.0" encoding="utf-8"?>
    <odoo>

        <record id="action_view_forfait_form" model="ir.ui.view">
            <field name="name">Forfaits</field>
            <field name="model">purchase.forfait</field>
            <field name="arch" type="xml">
                <form>
                    <group col="4">
                        <field name="code"/>
                        <field name="name"/>
                    </group>
                    <group col="4">
                        <field name="start_date"/>
                        <field name="end_date"/>
                    </group>
                    <field name="line_ids">
                        <tree editable="botttom">
                            <field name="product_id"  width="25"/>
                            <field name="prix_product" width="25"/>
                            <field name="facultatif" width="25"/>
                            <field name="prix_forfait" width="25"/>
                            <field name="quantity" width="25"/>
                        </tree>
                    </field>
                </form>
            </field>
        </record>

        <record id="action_view_forfait_tree" model="ir.ui.view">
            <field name="name">Forfaits</field>
            <field name="model">purchase.forfait</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="code"/>
                    <field name="name"/>
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="total_forfait"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="ps_rezoroute.sale_order_diagnostic_view">
            <field name="name">ps_rezoroute Sale Order Forfait</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">    
                <xpath expr="//field[@name='order_line']" position="before">
                    <button string="Forfaits" type="object" name="add_forfait" style="margin-bottom:100"/>
                    <br/>
                </xpath>
            </field>
        </record>
        

        <record id="action_view_diagnostic_wizard" model="ir.actions.act_window">
            <field name="name">Diagnostic Devis</field>
            <field name="res_model">engin.diagnostic.wizard</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="action_view_forfait_wizard_form" model="ir.ui.view">
            <field name="name">forfait.wizard</field>
            <field name="model">forfait.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="forfait_id" domain="[('start_date','&lt;=',context_today().strftime('%Y-%m-%d')),('end_date','>=',context_today().strftime('%Y-%m-%d'))]"/>
                        <field name="sale_id" invisible="1"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="action_view_forfait_wizard" model="ir.actions.act_window">
            <field name="name">Forfait Devis</field>
            <field name="res_model">forfait.wizard</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="action_view_forfait" model="ir.actions.act_window">
            <field name="name">Forfaits</field>
            <field name="res_model">purchase.forfait</field>
            <field name="view_mode">tree,form</field>
    
        </record>
        <menuitem id="sub_menu_forfait" action="action_view_forfait" name="Forfaits" parent="purchase.menu_purchase_products" sequence="30"/>
    </odoo>
<?xml version="1.0" encoding="utf-8"?>
    <odoo>
        <record model="ir.ui.view" id="ps_rezoroute.POS">
            <field name="name">ps_rezoroute POS</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>

            <field name="arch" type="xml">  
                <xpath expr="//field[@name='invoice_date']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath> 
                
                <xpath expr="//field[@name='date']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
               <!-- <xpath expr="//field[@name='date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> -->
                
                <xpath expr="//field[@name='ref']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>
            </field>
        </record>
        <record model="ir.ui.view" id="ps_rezoroute.Backorder">
            <field name="name">ps_rezoroute Backorder</field>
            <field name="model">stock.backorder.confirmation</field>
            <field name="inherit_id" ref="stock.view_backorder_confirmation"/>

            <field name="arch" type="xml">  
                <xpath expr="//button[@name='process']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> 
            </field>
        </record>

        <record model="ir.ui.view" id="ps_rezoroute.Location">
            <field name="name">ps_rezoroute Order Location</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>

            <field name="arch" type="xml">  

                <!-- <xpath expr="//button[@name='button_confirm']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>  -->

                <xpath expr="//header[1]" position="replace">
                 <header>
                    <button name="action_rfq_send" states="draft" string="Envoyer la commande par courriel" type="object" context="{'send_rfq':True}" class="oe_highlight" data-hotkey="g" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;draft&quot;]]]}"/>
                <button name="action_view_picking" string="Réception par Article" class="oe_highlight" type="object" attrs="{'invisible': ['|', '|' , ('is_shipped', '=', True), ('state','not in', ('purchase','done')), ('incoming_picking_count', '=', 0)]}" data-hotkey="y" modifiers="{&quot;invisible&quot;: [&quot;|&quot;, &quot;|&quot;, [&quot;is_shipped&quot;, &quot;=&quot;, true], [&quot;state&quot;, &quot;not in&quot;, [&quot;purchase&quot;, &quot;done&quot;]], [&quot;incoming_picking_count&quot;, &quot;=&quot;, 0]]}"/>
            
                    <button name="print_quotation" string="Imprimer RFQ" type="object" states="draft" class="oe_highlight" data-hotkey="k" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;draft&quot;]]]}"/>
                    <!-- <button name="button_confirm" string="Confirmer la commande 1"  invisible="1" modifiers="{&quot;invisible&quot;: true}"/> -->
                    <button name="button_approve" type="object" states="to approve" string="Confirmer le commande" class="oe_highlight" data-hotkey="z" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;to approve&quot;]]]}"/>
                    <!-- <attribute name="attrs">{'invisible': [('state', '!=', 'draft')]}</attribute> -->
                    <!-- <button name="action_create_invoice" string="Créer Facture" attrs="{'invisible': [('state', '!=', 'done')]}" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;!=&quot;, &quot;done&quot;]]}"/> -->
                    <button name="action_rfq_send" states="sent" string="Re-Envoyer courriel" type="object" context="{'send_rfq':True}" data-hotkey="g" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;sent&quot;]]]}"/>
                    <button name="print_quotation" string="Imprimer RFQ" type="object" states="sent" data-hotkey="k" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;sent&quot;]]]}"/>
                    <button name="button_confirm" type="object" states="draft" string="Confirmer Commande" groups="ps_rezoroute.group_achat" id="draft_confirm" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;draft&quot;]]]}"/>
                    <button name="action_rfq_send" states="purchase" string="Envoyer PO par courriel" type="object" context="{'send_rfq':False}" data-hotkey="g" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;purchase&quot;]]]}"/>
                    <button name="confirm_reminder_mail" string="Confirmer la date de réception" type="object" attrs="{'invisible': ['|', '|', '|', ('state', 'not in', ('purchase', 'done')), ('mail_reminder_confirmed', '=', True), ('date_planned', '=', False), ('effective_date', '!=', False)]}" data-hotkey="o" modifiers="{&quot;invisible&quot;: [&quot;|&quot;, &quot;|&quot;, &quot;|&quot;, [&quot;state&quot;, &quot;not in&quot;, [&quot;purchase&quot;, &quot;done&quot;]], [&quot;mail_reminder_confirmed&quot;, &quot;=&quot;, true], [&quot;date_planned&quot;, &quot;=&quot;, false], [&quot;effective_date&quot;, &quot;!=&quot;, false]]}"/>
                    <button name="action_create_invoice"  string="Créer une facture" type="object" attrs="{'invisible': [('is_received','=',False)]}" data-hotkey="w" modifiers="{&quot;invisible&quot;: [&quot;|&quot;, &quot;|&quot;, [&quot;state&quot;, &quot;not in&quot;, [&quot;purchase&quot;, &quot;done&quot;]], [&quot;invoice_status&quot;, &quot;not in&quot;, [&quot;no&quot;, &quot;invoiced&quot;]], [&quot;order_line&quot;, &quot;=&quot;, []]]}"/>
                    <button name="button_draft" states="cancel" string="Set to Draft" type="object" data-hotkey="o" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;cancel&quot;]]]}"/>
                    <button name="button_cancel" states="draft,to approve,sent,purchase" string="Annuler" type="object" data-hotkey="x" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;draft&quot;, &quot;to approve&quot;, &quot;sent&quot;, &quot;purchase&quot;]]]}"/>
                    <button name="button_done" type="object" string="Bloquer" states="purchase" data-hotkey="l" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;purchase&quot;]]]}"/>
                    <button name="button_unlock" type="object" string="Dévérouiller" states="done" data-hotkey="l" modifiers="{&quot;invisible&quot;: [[&quot;state&quot;, &quot;not in&quot;, [&quot;done&quot;]]]}"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,sent,purchase" readonly="1" on_change="1" modifiers="{&quot;readonly&quot;: true}"/>
                </header>

                    <!-- <button name="button_confirm" groups="ps_rezoroute.group_achat" string="Confirmer la commande 1"/> -->
                </xpath> 
                
                <xpath expr="//button[@name='action_create_invoice']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> 
                <xpath expr="//button[@name='action_create_invoice']" position="replace">
                
                    <!-- <attribute name="attrs">{'invisible': [('state', '!=', 'draft')]}</attribute> -->
                    <button name="action_create_invoice" string="Créer Facture" attrs="{'invisible': [('state', '!=', 'done')]}"/>
                </xpath> 
                <xpath expr="//field[@name='requisition_id']" position="after">
                    <field name="is_received" readonly="1" invisible="1"/>
                    <field name="location_name" readonly="1"/>
                    <field name="location_id" readonly="1" invisible="1"/>
                </xpath> 
            </field>
        </record>
    </odoo>